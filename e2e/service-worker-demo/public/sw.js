var kt=Object.defineProperty;var nt=n=>{throw TypeError(n)};var Et=(n,t,e)=>t in n?kt(n,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):n[t]=e;var V=(n,t,e)=>Et(n,typeof t!="symbol"?t+"":t,e),rt=(n,t,e)=>t.has(n)||nt("Cannot "+e);var _t=(n,t,e)=>(rt(n,t,"read from private field"),e?e.call(n):t.get(n)),it=(n,t,e)=>t.has(n)?nt("Cannot add the same private member more than once"):t instanceof WeakSet?t.add(n):t.set(n,e),ot=(n,t,e,_)=>(rt(n,t,"write to private field"),_?_.call(n,e):t.set(n,e),e);function Ft(n){for(var t=[],e=0;e<n.length;){var _=n[e];if(_==="*"||_==="+"||_==="?"){t.push({type:"MODIFIER",index:e,value:n[e++]});continue}if(_==="\\"){t.push({type:"ESCAPED_CHAR",index:e++,value:n[e++]});continue}if(_==="{"){t.push({type:"OPEN",index:e,value:n[e++]});continue}if(_==="}"){t.push({type:"CLOSE",index:e,value:n[e++]});continue}if(_===":"){for(var i="",o=e+1;o<n.length;){var s=n.charCodeAt(o);if(s>=48&&s<=57||s>=65&&s<=90||s>=97&&s<=122||s===95){i+=n[o++];continue}break}if(!i)throw new TypeError("Missing parameter name at ".concat(e));t.push({type:"NAME",index:e,value:i}),e=o;continue}if(_==="("){var c=1,d="",o=e+1;if(n[o]==="?")throw new TypeError('Pattern cannot start with "?" at '.concat(o));for(;o<n.length;){if(n[o]==="\\"){d+=n[o++]+n[o++];continue}if(n[o]===")"){if(c--,c===0){o++;break}}else if(n[o]==="("&&(c++,n[o+1]!=="?"))throw new TypeError("Capturing groups are not allowed at ".concat(o));d+=n[o++]}if(c)throw new TypeError("Unbalanced pattern at ".concat(e));if(!d)throw new TypeError("Missing pattern at ".concat(e));t.push({type:"PATTERN",index:e,value:d}),e=o;continue}t.push({type:"CHAR",index:e,value:n[e++]})}return t.push({type:"END",index:e,value:""}),t}function Tt(n,t){t===void 0&&(t={});for(var e=Ft(n),_=t.prefixes,i=_===void 0?"./":_,o="[^".concat(j(t.delimiter||"/#?"),"]+?"),s=[],c=0,d=0,g="",w=function(F){if(d<e.length&&e[d].type===F)return e[d++].value},x=function(F){var O=w(F);if(O!==void 0)return O;var D=e[d],B=D.type,G=D.index;throw new TypeError("Unexpected ".concat(B," at ").concat(G,", expected ").concat(F))},I=function(){for(var F="",O;O=w("CHAR")||w("ESCAPED_CHAR");)F+=O;return F};d<e.length;){var p=w("CHAR"),k=w("NAME"),E=w("PATTERN");if(k||E){var R=p||"";i.indexOf(R)===-1&&(g+=R,R=""),g&&(s.push(g),g=""),s.push({name:k||c++,prefix:R,suffix:"",pattern:E||o,modifier:w("MODIFIER")||""});continue}var v=p||w("ESCAPED_CHAR");if(v){g+=v;continue}g&&(s.push(g),g="");var T=w("OPEN");if(T){var R=I(),M=w("NAME")||"",h=w("PATTERN")||"",S=I();x("CLOSE"),s.push({name:M||(h?c++:""),pattern:M&&!h?o:h,prefix:R,suffix:S,modifier:w("MODIFIER")||""});continue}x("END")}return s}function At(n,t){var e=[],_=mt(n,e,t);return Mt(_,e,t)}function Mt(n,t,e){e===void 0&&(e={});var _=e.decode,i=_===void 0?function(o){return o}:_;return function(o){var s=n.exec(o);if(!s)return!1;for(var c=s[0],d=s.index,g=Object.create(null),w=function(I){if(s[I]===void 0)return"continue";var p=t[I-1];p.modifier==="*"||p.modifier==="+"?g[p.name]=s[I].split(p.prefix+p.suffix).map(function(k){return i(k,p)}):g[p.name]=i(s[I],p)},x=1;x<s.length;x++)w(x);return{path:c,index:d,params:g}}}function j(n){return n.replace(/([.+*?=^!:${}()[\]|/\\])/g,"\\$1")}function bt(n){return n&&n.sensitive?"":"i"}function St(n,t){if(!t)return n;for(var e=/\((?:\?<(.*?)>)?(?!\?)/g,_=0,i=e.exec(n.source);i;)t.push({name:i[1]||_++,prefix:"",suffix:"",modifier:"",pattern:""}),i=e.exec(n.source);return n}function Ot(n,t,e){var _=n.map(function(i){return mt(i,t,e).source});return new RegExp("(?:".concat(_.join("|"),")"),bt(e))}function Dt(n,t,e){return Ht(Tt(n,e),t,e)}function Ht(n,t,e){e===void 0&&(e={});for(var _=e.strict,i=_===void 0?!1:_,o=e.start,s=o===void 0?!0:o,c=e.end,d=c===void 0?!0:c,g=e.encode,w=g===void 0?function(G){return G}:g,x=e.delimiter,I=x===void 0?"/#?":x,p=e.endsWith,k=p===void 0?"":p,E="[".concat(j(k),"]|$"),R="[".concat(j(I),"]"),v=s?"^":"",T=0,M=n;T<M.length;T++){var h=M[T];if(typeof h=="string")v+=j(w(h));else{var S=j(w(h.prefix)),F=j(w(h.suffix));if(h.pattern)if(t&&t.push(h),S||F)if(h.modifier==="+"||h.modifier==="*"){var O=h.modifier==="*"?"?":"";v+="(?:".concat(S,"((?:").concat(h.pattern,")(?:").concat(F).concat(S,"(?:").concat(h.pattern,"))*)").concat(F,")").concat(O)}else v+="(?:".concat(S,"(").concat(h.pattern,")").concat(F,")").concat(h.modifier);else h.modifier==="+"||h.modifier==="*"?v+="((?:".concat(h.pattern,")").concat(h.modifier,")"):v+="(".concat(h.pattern,")").concat(h.modifier);else v+="(?:".concat(S).concat(F,")").concat(h.modifier)}}if(d)i||(v+="".concat(R,"?")),v+=e.endsWith?"(?=".concat(E,")"):"$";else{var D=n[n.length-1],B=typeof D=="string"?R.indexOf(D[D.length-1])>-1:D===void 0;i||(v+="(?:".concat(R,"(?=").concat(E,"))?")),B||(v+="(?=".concat(R,"|").concat(E,")"))}return new RegExp(v,bt(e))}function mt(n,t,e){return n instanceof RegExp?St(n,t):Array.isArray(n)?Ot(n,t,e):Dt(n,t,e)}var z;class Nt{constructor(t){V(this,"fragmentConfigs",new Map);V(this,"routeMap",new Map);it(this,z);ot(this,z,(t==null?void 0:t.prePiercingStyles)??"")}get prePiercingStyles(){return _t(this,z)}registerFragment(t){if(this.fragmentConfigs.has(t.fragmentId)){console.warn(`\x1B[31m Warning: you're trying to register a fragment with id "${t.fragmentId}", but a fragment with the same fragmentId has already been registered, thus this duplicate registration will be ignored. \x1B[0m`);return}if(t.upstream&&!t.endpoint)throw new Error(`\x1B[31m You're using the deprecated \`upstream\` property in the fragment config for fragment with id "${t.fragmentId}". Please use \`endpoint\` config property instead. \x1B[0m`);this.fragmentConfigs.set(t.fragmentId,t),t.routePatterns.forEach(e=>{const _=At(e,{decode:globalThis.decodeURIComponent});this.routeMap.set(_,t)})}matchRequestToFragment(t){const e=[...this.routeMap.keys()].find(_=>_(t));return e?this.routeMap.get(e)??null:null}}z=new WeakMap;let C,$=null;function jt(){return($===null||$.buffer!==C.memory.buffer)&&($=new Int32Array(C.memory.buffer)),$}const ht={NONE:0,REWINDING:2};function yt(n,t){if(n!==t)throw new Error(`Expected ${n} to equal ${t}`)}function Ct(n){if(!n)throw new Error("Assertion failed")}function Lt(){yt(C.asyncify_get_state(),ht.NONE)}const at=new Map;function Pt(n,t){if(C.asyncify_get_state()===ht.REWINDING){C.asyncify_stop_rewind();return}Lt(),yt(n%4,0),jt().set([n+8,n+1024],n/4),C.asyncify_start_unwind(n),Ct(!at.has(n)),at.set(n,t)}let r;const A=new Array(128).fill(void 0);A.push(void 0,null,!0,!1);function y(n){return A[n]}let f=0,L=null;function P(){return(L===null||L.byteLength===0)&&(L=new Uint8Array(r.memory.buffer)),L}const U=typeof TextEncoder<"u"?new TextEncoder("utf-8"):{encode:()=>{throw Error("TextEncoder not available")}},Wt=typeof U.encodeInto=="function"?function(n,t){return U.encodeInto(n,t)}:function(n,t){const e=U.encode(n);return t.set(e),{read:n.length,written:e.length}};function b(n,t,e){if(e===void 0){const c=U.encode(n),d=t(c.length,1)>>>0;return P().subarray(d,d+c.length).set(c),f=c.length,d}let _=n.length,i=t(_,1)>>>0;const o=P();let s=0;for(;s<_;s++){const c=n.charCodeAt(s);if(c>127)break;o[i+s]=c}if(s!==_){s!==0&&(n=n.slice(s)),i=e(i,_,_=s+n.length*3,1)>>>0;const c=P().subarray(i+s,i+_),d=Wt(n,c);s+=d.written,i=e(i,_,s,1)>>>0}return f=s,i}let H=null;function a(){return(H===null||H.buffer.detached===!0||H.buffer.detached===void 0&&H.buffer!==r.memory.buffer)&&(H=new DataView(r.memory.buffer)),H}let W=A.length;function l(n){W===A.length&&A.push(A.length+1);const t=W;return W=A[t],A[t]=n,t}function zt(n,t){try{return n.apply(this,t)}catch(e){r.__wbindgen_exn_store(l(e))}}function m(n){return n==null}const vt=typeof TextDecoder<"u"?new TextDecoder("utf-8",{ignoreBOM:!0,fatal:!0}):{decode:()=>{throw Error("TextDecoder not available")}};typeof TextDecoder<"u"&&vt.decode();function N(n,t){return n=n>>>0,vt.decode(P().subarray(n,n+t))}function J(n){const t=typeof n;if(t=="number"||t=="boolean"||n==null)return`${n}`;if(t=="string")return`"${n}"`;if(t=="symbol"){const i=n.description;return i==null?"Symbol":`Symbol(${i})`}if(t=="function"){const i=n.name;return typeof i=="string"&&i.length>0?`Function(${i})`:"Function"}if(Array.isArray(n)){const i=n.length;let o="[";i>0&&(o+=J(n[0]));for(let s=1;s<i;s++)o+=", "+J(n[s]);return o+="]",o}const e=/\[object ([^\]]+)\]/.exec(toString.call(n));let _;if(e&&e.length>1)_=e[1];else return toString.call(n);if(_=="Object")try{return"Object("+JSON.stringify(n)+")"}catch{return"Object"}return n instanceof Error?`${n.name}: ${n.message}
${n.stack}`:_}function $t(n){n<132||(A[n]=W,W=n)}function u(n){const t=y(n);return $t(n),t}let q=128;function Ut(n){if(q==1)throw new Error("out of js stack");return A[--q]=n,q}function qt(n,t){const e=t(n.length*1,1)>>>0;return P().set(n,e/1),f=n.length,e}const st=typeof FinalizationRegistry>"u"?{register:()=>{},unregister:()=>{}}:new FinalizationRegistry(n=>r.__wbg_comment_free(n>>>0,1));class K{static __wrap(t){t=t>>>0;const e=Object.create(K.prototype);return e.__wbg_ptr=t,st.register(e,e.__wbg_ptr,e),e}__destroy_into_raw(){const t=this.__wbg_ptr;return this.__wbg_ptr=0,st.unregister(this),t}free(){const t=this.__destroy_into_raw();r.__wbg_comment_free(t,0)}before(t,e){try{const o=r.__wbindgen_add_to_stack_pointer(-16),s=b(t,r.__wbindgen_malloc,r.__wbindgen_realloc),c=f;r.comment_before(o,this.__wbg_ptr,s,c,m(e)?0:l(e));var _=a().getInt32(o+4*0,!0),i=a().getInt32(o+4*1,!0);if(i)throw u(_)}finally{r.__wbindgen_add_to_stack_pointer(16)}}after(t,e){try{const o=r.__wbindgen_add_to_stack_pointer(-16),s=b(t,r.__wbindgen_malloc,r.__wbindgen_realloc),c=f;r.comment_after(o,this.__wbg_ptr,s,c,m(e)?0:l(e));var _=a().getInt32(o+4*0,!0),i=a().getInt32(o+4*1,!0);if(i)throw u(_)}finally{r.__wbindgen_add_to_stack_pointer(16)}}replace(t,e){try{const o=r.__wbindgen_add_to_stack_pointer(-16),s=b(t,r.__wbindgen_malloc,r.__wbindgen_realloc),c=f;r.comment_replace(o,this.__wbg_ptr,s,c,m(e)?0:l(e));var _=a().getInt32(o+4*0,!0),i=a().getInt32(o+4*1,!0);if(i)throw u(_)}finally{r.__wbindgen_add_to_stack_pointer(16)}}remove(){try{const _=r.__wbindgen_add_to_stack_pointer(-16);r.comment_remove(_,this.__wbg_ptr);var t=a().getInt32(_+4*0,!0),e=a().getInt32(_+4*1,!0);if(e)throw u(t)}finally{r.__wbindgen_add_to_stack_pointer(16)}}get removed(){try{const i=r.__wbindgen_add_to_stack_pointer(-16);r.comment_removed(i,this.__wbg_ptr);var t=a().getInt32(i+4*0,!0),e=a().getInt32(i+4*1,!0),_=a().getInt32(i+4*2,!0);if(_)throw u(e);return t!==0}finally{r.__wbindgen_add_to_stack_pointer(16)}}get text(){let t,e;try{const g=r.__wbindgen_add_to_stack_pointer(-16);r.comment_text(g,this.__wbg_ptr);var _=a().getInt32(g+4*0,!0),i=a().getInt32(g+4*1,!0),o=a().getInt32(g+4*2,!0),s=a().getInt32(g+4*3,!0),c=_,d=i;if(s)throw c=0,d=0,u(o);return t=c,e=d,N(c,d)}finally{r.__wbindgen_add_to_stack_pointer(16),r.__wbindgen_free(t,e,1)}}set text(t){try{const i=r.__wbindgen_add_to_stack_pointer(-16),o=b(t,r.__wbindgen_malloc,r.__wbindgen_realloc),s=f;r.comment_set_text(i,this.__wbg_ptr,o,s);var e=a().getInt32(i+4*0,!0),_=a().getInt32(i+4*1,!0);if(_)throw u(e)}finally{r.__wbindgen_add_to_stack_pointer(16)}}}const ct=typeof FinalizationRegistry>"u"?{register:()=>{},unregister:()=>{}}:new FinalizationRegistry(n=>r.__wbg_doctype_free(n>>>0,1));class X{static __wrap(t){t=t>>>0;const e=Object.create(X.prototype);return e.__wbg_ptr=t,ct.register(e,e.__wbg_ptr,e),e}__destroy_into_raw(){const t=this.__wbg_ptr;return this.__wbg_ptr=0,ct.unregister(this),t}free(){const t=this.__destroy_into_raw();r.__wbg_doctype_free(t,0)}get name(){try{const i=r.__wbindgen_add_to_stack_pointer(-16);r.doctype_name(i,this.__wbg_ptr);var t=a().getInt32(i+4*0,!0),e=a().getInt32(i+4*1,!0),_=a().getInt32(i+4*2,!0);if(_)throw u(e);return u(t)}finally{r.__wbindgen_add_to_stack_pointer(16)}}get publicId(){try{const i=r.__wbindgen_add_to_stack_pointer(-16);r.doctype_public_id(i,this.__wbg_ptr);var t=a().getInt32(i+4*0,!0),e=a().getInt32(i+4*1,!0),_=a().getInt32(i+4*2,!0);if(_)throw u(e);return u(t)}finally{r.__wbindgen_add_to_stack_pointer(16)}}get systemId(){try{const i=r.__wbindgen_add_to_stack_pointer(-16);r.doctype_system_id(i,this.__wbg_ptr);var t=a().getInt32(i+4*0,!0),e=a().getInt32(i+4*1,!0),_=a().getInt32(i+4*2,!0);if(_)throw u(e);return u(t)}finally{r.__wbindgen_add_to_stack_pointer(16)}}}const dt=typeof FinalizationRegistry>"u"?{register:()=>{},unregister:()=>{}}:new FinalizationRegistry(n=>r.__wbg_documentend_free(n>>>0,1));class Q{static __wrap(t){t=t>>>0;const e=Object.create(Q.prototype);return e.__wbg_ptr=t,dt.register(e,e.__wbg_ptr,e),e}__destroy_into_raw(){const t=this.__wbg_ptr;return this.__wbg_ptr=0,dt.unregister(this),t}free(){const t=this.__destroy_into_raw();r.__wbg_documentend_free(t,0)}append(t,e){try{const o=r.__wbindgen_add_to_stack_pointer(-16),s=b(t,r.__wbindgen_malloc,r.__wbindgen_realloc),c=f;r.documentend_append(o,this.__wbg_ptr,s,c,m(e)?0:l(e));var _=a().getInt32(o+4*0,!0),i=a().getInt32(o+4*1,!0);if(i)throw u(_)}finally{r.__wbindgen_add_to_stack_pointer(16)}}}const gt=typeof FinalizationRegistry>"u"?{register:()=>{},unregister:()=>{}}:new FinalizationRegistry(n=>r.__wbg_element_free(n>>>0,1));class Y{static __wrap(t){t=t>>>0;const e=Object.create(Y.prototype);return e.__wbg_ptr=t,gt.register(e,e.__wbg_ptr,e),e}__destroy_into_raw(){const t=this.__wbg_ptr;return this.__wbg_ptr=0,gt.unregister(this),t}free(){const t=this.__destroy_into_raw();r.__wbg_element_free(t,0)}before(t,e){try{const o=r.__wbindgen_add_to_stack_pointer(-16),s=b(t,r.__wbindgen_malloc,r.__wbindgen_realloc),c=f;r.element_before(o,this.__wbg_ptr,s,c,m(e)?0:l(e));var _=a().getInt32(o+4*0,!0),i=a().getInt32(o+4*1,!0);if(i)throw u(_)}finally{r.__wbindgen_add_to_stack_pointer(16)}}after(t,e){try{const o=r.__wbindgen_add_to_stack_pointer(-16),s=b(t,r.__wbindgen_malloc,r.__wbindgen_realloc),c=f;r.element_after(o,this.__wbg_ptr,s,c,m(e)?0:l(e));var _=a().getInt32(o+4*0,!0),i=a().getInt32(o+4*1,!0);if(i)throw u(_)}finally{r.__wbindgen_add_to_stack_pointer(16)}}replace(t,e){try{const o=r.__wbindgen_add_to_stack_pointer(-16),s=b(t,r.__wbindgen_malloc,r.__wbindgen_realloc),c=f;r.element_replace(o,this.__wbg_ptr,s,c,m(e)?0:l(e));var _=a().getInt32(o+4*0,!0),i=a().getInt32(o+4*1,!0);if(i)throw u(_)}finally{r.__wbindgen_add_to_stack_pointer(16)}}remove(){try{const _=r.__wbindgen_add_to_stack_pointer(-16);r.element_remove(_,this.__wbg_ptr);var t=a().getInt32(_+4*0,!0),e=a().getInt32(_+4*1,!0);if(e)throw u(t)}finally{r.__wbindgen_add_to_stack_pointer(16)}}get removed(){try{const i=r.__wbindgen_add_to_stack_pointer(-16);r.element_removed(i,this.__wbg_ptr);var t=a().getInt32(i+4*0,!0),e=a().getInt32(i+4*1,!0),_=a().getInt32(i+4*2,!0);if(_)throw u(e);return t!==0}finally{r.__wbindgen_add_to_stack_pointer(16)}}get tagName(){let t,e;try{const g=r.__wbindgen_add_to_stack_pointer(-16);r.element_tag_name(g,this.__wbg_ptr);var _=a().getInt32(g+4*0,!0),i=a().getInt32(g+4*1,!0),o=a().getInt32(g+4*2,!0),s=a().getInt32(g+4*3,!0),c=_,d=i;if(s)throw c=0,d=0,u(o);return t=c,e=d,N(c,d)}finally{r.__wbindgen_add_to_stack_pointer(16),r.__wbindgen_free(t,e,1)}}set tagName(t){try{const i=r.__wbindgen_add_to_stack_pointer(-16),o=b(t,r.__wbindgen_malloc,r.__wbindgen_realloc),s=f;r.element_set_tag_name(i,this.__wbg_ptr,o,s);var e=a().getInt32(i+4*0,!0),_=a().getInt32(i+4*1,!0);if(_)throw u(e)}finally{r.__wbindgen_add_to_stack_pointer(16)}}get namespaceURI(){try{const i=r.__wbindgen_add_to_stack_pointer(-16);r.element_namespace_uri(i,this.__wbg_ptr);var t=a().getInt32(i+4*0,!0),e=a().getInt32(i+4*1,!0),_=a().getInt32(i+4*2,!0);if(_)throw u(e);return u(t)}finally{r.__wbindgen_add_to_stack_pointer(16)}}get attributes(){try{const i=r.__wbindgen_add_to_stack_pointer(-16);r.element_attributes(i,this.__wbg_ptr);var t=a().getInt32(i+4*0,!0),e=a().getInt32(i+4*1,!0),_=a().getInt32(i+4*2,!0);if(_)throw u(e);return u(t)}finally{r.__wbindgen_add_to_stack_pointer(16)}}getAttribute(t){try{const o=r.__wbindgen_add_to_stack_pointer(-16),s=b(t,r.__wbindgen_malloc,r.__wbindgen_realloc),c=f;r.element_getAttribute(o,this.__wbg_ptr,s,c);var e=a().getInt32(o+4*0,!0),_=a().getInt32(o+4*1,!0),i=a().getInt32(o+4*2,!0);if(i)throw u(_);return u(e)}finally{r.__wbindgen_add_to_stack_pointer(16)}}hasAttribute(t){try{const o=r.__wbindgen_add_to_stack_pointer(-16),s=b(t,r.__wbindgen_malloc,r.__wbindgen_realloc),c=f;r.element_hasAttribute(o,this.__wbg_ptr,s,c);var e=a().getInt32(o+4*0,!0),_=a().getInt32(o+4*1,!0),i=a().getInt32(o+4*2,!0);if(i)throw u(_);return e!==0}finally{r.__wbindgen_add_to_stack_pointer(16)}}setAttribute(t,e){try{const o=r.__wbindgen_add_to_stack_pointer(-16),s=b(t,r.__wbindgen_malloc,r.__wbindgen_realloc),c=f,d=b(e,r.__wbindgen_malloc,r.__wbindgen_realloc),g=f;r.element_setAttribute(o,this.__wbg_ptr,s,c,d,g);var _=a().getInt32(o+4*0,!0),i=a().getInt32(o+4*1,!0);if(i)throw u(_)}finally{r.__wbindgen_add_to_stack_pointer(16)}}removeAttribute(t){try{const i=r.__wbindgen_add_to_stack_pointer(-16),o=b(t,r.__wbindgen_malloc,r.__wbindgen_realloc),s=f;r.element_removeAttribute(i,this.__wbg_ptr,o,s);var e=a().getInt32(i+4*0,!0),_=a().getInt32(i+4*1,!0);if(_)throw u(e)}finally{r.__wbindgen_add_to_stack_pointer(16)}}prepend(t,e){try{const o=r.__wbindgen_add_to_stack_pointer(-16),s=b(t,r.__wbindgen_malloc,r.__wbindgen_realloc),c=f;r.element_prepend(o,this.__wbg_ptr,s,c,m(e)?0:l(e));var _=a().getInt32(o+4*0,!0),i=a().getInt32(o+4*1,!0);if(i)throw u(_)}finally{r.__wbindgen_add_to_stack_pointer(16)}}append(t,e){try{const o=r.__wbindgen_add_to_stack_pointer(-16),s=b(t,r.__wbindgen_malloc,r.__wbindgen_realloc),c=f;r.element_append(o,this.__wbg_ptr,s,c,m(e)?0:l(e));var _=a().getInt32(o+4*0,!0),i=a().getInt32(o+4*1,!0);if(i)throw u(_)}finally{r.__wbindgen_add_to_stack_pointer(16)}}setInnerContent(t,e){try{const o=r.__wbindgen_add_to_stack_pointer(-16),s=b(t,r.__wbindgen_malloc,r.__wbindgen_realloc),c=f;r.element_setInnerContent(o,this.__wbg_ptr,s,c,m(e)?0:l(e));var _=a().getInt32(o+4*0,!0),i=a().getInt32(o+4*1,!0);if(i)throw u(_)}finally{r.__wbindgen_add_to_stack_pointer(16)}}removeAndKeepContent(){try{const _=r.__wbindgen_add_to_stack_pointer(-16);r.element_removeAndKeepContent(_,this.__wbg_ptr);var t=a().getInt32(_+4*0,!0),e=a().getInt32(_+4*1,!0);if(e)throw u(t)}finally{r.__wbindgen_add_to_stack_pointer(16)}}onEndTag(t){try{const i=r.__wbindgen_add_to_stack_pointer(-16);r.element_onEndTag(i,this.__wbg_ptr,l(t));var e=a().getInt32(i+4*0,!0),_=a().getInt32(i+4*1,!0);if(_)throw u(e)}finally{r.__wbindgen_add_to_stack_pointer(16)}}}const ut=typeof FinalizationRegistry>"u"?{register:()=>{},unregister:()=>{}}:new FinalizationRegistry(n=>r.__wbg_endtag_free(n>>>0,1));class Z{static __wrap(t){t=t>>>0;const e=Object.create(Z.prototype);return e.__wbg_ptr=t,ut.register(e,e.__wbg_ptr,e),e}__destroy_into_raw(){const t=this.__wbg_ptr;return this.__wbg_ptr=0,ut.unregister(this),t}free(){const t=this.__destroy_into_raw();r.__wbg_endtag_free(t,0)}get name(){let t,e;try{const g=r.__wbindgen_add_to_stack_pointer(-16);r.endtag_name(g,this.__wbg_ptr);var _=a().getInt32(g+4*0,!0),i=a().getInt32(g+4*1,!0),o=a().getInt32(g+4*2,!0),s=a().getInt32(g+4*3,!0),c=_,d=i;if(s)throw c=0,d=0,u(o);return t=c,e=d,N(c,d)}finally{r.__wbindgen_add_to_stack_pointer(16),r.__wbindgen_free(t,e,1)}}set name(t){try{const i=r.__wbindgen_add_to_stack_pointer(-16),o=b(t,r.__wbindgen_malloc,r.__wbindgen_realloc),s=f;r.endtag_set_name(i,this.__wbg_ptr,o,s);var e=a().getInt32(i+4*0,!0),_=a().getInt32(i+4*1,!0);if(_)throw u(e)}finally{r.__wbindgen_add_to_stack_pointer(16)}}before(t,e){try{const o=r.__wbindgen_add_to_stack_pointer(-16),s=b(t,r.__wbindgen_malloc,r.__wbindgen_realloc),c=f;r.endtag_before(o,this.__wbg_ptr,s,c,m(e)?0:l(e));var _=a().getInt32(o+4*0,!0),i=a().getInt32(o+4*1,!0);if(i)throw u(_)}finally{r.__wbindgen_add_to_stack_pointer(16)}}after(t,e){try{const o=r.__wbindgen_add_to_stack_pointer(-16),s=b(t,r.__wbindgen_malloc,r.__wbindgen_realloc),c=f;r.endtag_after(o,this.__wbg_ptr,s,c,m(e)?0:l(e));var _=a().getInt32(o+4*0,!0),i=a().getInt32(o+4*1,!0);if(i)throw u(_)}finally{r.__wbindgen_add_to_stack_pointer(16)}}remove(){try{const _=r.__wbindgen_add_to_stack_pointer(-16);r.endtag_remove(_,this.__wbg_ptr);var t=a().getInt32(_+4*0,!0),e=a().getInt32(_+4*1,!0);if(e)throw u(t)}finally{r.__wbindgen_add_to_stack_pointer(16)}}}const lt=typeof FinalizationRegistry>"u"?{register:()=>{},unregister:()=>{}}:new FinalizationRegistry(n=>r.__wbg_htmlrewriter_free(n>>>0,1));let Bt=class{__destroy_into_raw(){const t=this.__wbg_ptr;return this.__wbg_ptr=0,lt.unregister(this),t}free(){const t=this.__destroy_into_raw();r.__wbg_htmlrewriter_free(t,0)}constructor(t,e){try{const _=r.htmlrewriter_new(Ut(t),m(e)?0:l(e));return this.__wbg_ptr=_>>>0,lt.register(this,this.__wbg_ptr,this),this}finally{A[q++]=void 0}}on(t,e){try{const o=r.__wbindgen_add_to_stack_pointer(-16),s=b(t,r.__wbindgen_malloc,r.__wbindgen_realloc),c=f;r.htmlrewriter_on(o,this.__wbg_ptr,s,c,l(e));var _=a().getInt32(o+4*0,!0),i=a().getInt32(o+4*1,!0);if(i)throw u(_)}finally{r.__wbindgen_add_to_stack_pointer(16)}}onDocument(t){try{const i=r.__wbindgen_add_to_stack_pointer(-16);r.htmlrewriter_onDocument(i,this.__wbg_ptr,l(t));var e=a().getInt32(i+4*0,!0),_=a().getInt32(i+4*1,!0);if(_)throw u(e)}finally{r.__wbindgen_add_to_stack_pointer(16)}}write(t){try{const i=r.__wbindgen_add_to_stack_pointer(-16),o=qt(t,r.__wbindgen_malloc),s=f;r.htmlrewriter_write(i,this.__wbg_ptr,o,s);var e=a().getInt32(i+4*0,!0),_=a().getInt32(i+4*1,!0);if(_)throw u(e)}finally{r.__wbindgen_add_to_stack_pointer(16)}}end(){try{const _=r.__wbindgen_add_to_stack_pointer(-16);r.htmlrewriter_end(_,this.__wbg_ptr);var t=a().getInt32(_+4*0,!0),e=a().getInt32(_+4*1,!0);if(e)throw u(t)}finally{r.__wbindgen_add_to_stack_pointer(16)}}get asyncifyStackPtr(){return r.htmlrewriter_asyncify_stack_ptr(this.__wbg_ptr)>>>0}};const ft=typeof FinalizationRegistry>"u"?{register:()=>{},unregister:()=>{}}:new FinalizationRegistry(n=>r.__wbg_textchunk_free(n>>>0,1));class tt{static __wrap(t){t=t>>>0;const e=Object.create(tt.prototype);return e.__wbg_ptr=t,ft.register(e,e.__wbg_ptr,e),e}__destroy_into_raw(){const t=this.__wbg_ptr;return this.__wbg_ptr=0,ft.unregister(this),t}free(){const t=this.__destroy_into_raw();r.__wbg_textchunk_free(t,0)}before(t,e){try{const o=r.__wbindgen_add_to_stack_pointer(-16),s=b(t,r.__wbindgen_malloc,r.__wbindgen_realloc),c=f;r.comment_before(o,this.__wbg_ptr,s,c,m(e)?0:l(e));var _=a().getInt32(o+4*0,!0),i=a().getInt32(o+4*1,!0);if(i)throw u(_)}finally{r.__wbindgen_add_to_stack_pointer(16)}}after(t,e){try{const o=r.__wbindgen_add_to_stack_pointer(-16),s=b(t,r.__wbindgen_malloc,r.__wbindgen_realloc),c=f;r.comment_after(o,this.__wbg_ptr,s,c,m(e)?0:l(e));var _=a().getInt32(o+4*0,!0),i=a().getInt32(o+4*1,!0);if(i)throw u(_)}finally{r.__wbindgen_add_to_stack_pointer(16)}}replace(t,e){try{const o=r.__wbindgen_add_to_stack_pointer(-16),s=b(t,r.__wbindgen_malloc,r.__wbindgen_realloc),c=f;r.comment_replace(o,this.__wbg_ptr,s,c,m(e)?0:l(e));var _=a().getInt32(o+4*0,!0),i=a().getInt32(o+4*1,!0);if(i)throw u(_)}finally{r.__wbindgen_add_to_stack_pointer(16)}}remove(){try{const _=r.__wbindgen_add_to_stack_pointer(-16);r.comment_remove(_,this.__wbg_ptr);var t=a().getInt32(_+4*0,!0),e=a().getInt32(_+4*1,!0);if(e)throw u(t)}finally{r.__wbindgen_add_to_stack_pointer(16)}}get removed(){try{const i=r.__wbindgen_add_to_stack_pointer(-16);r.comment_removed(i,this.__wbg_ptr);var t=a().getInt32(i+4*0,!0),e=a().getInt32(i+4*1,!0),_=a().getInt32(i+4*2,!0);if(_)throw u(e);return t!==0}finally{r.__wbindgen_add_to_stack_pointer(16)}}get text(){let t,e;try{const g=r.__wbindgen_add_to_stack_pointer(-16);r.textchunk_text(g,this.__wbg_ptr);var _=a().getInt32(g+4*0,!0),i=a().getInt32(g+4*1,!0),o=a().getInt32(g+4*2,!0),s=a().getInt32(g+4*3,!0),c=_,d=i;if(s)throw c=0,d=0,u(o);return t=c,e=d,N(c,d)}finally{r.__wbindgen_add_to_stack_pointer(16),r.__wbindgen_free(t,e,1)}}get lastInTextNode(){try{const i=r.__wbindgen_add_to_stack_pointer(-16);r.textchunk_last_in_text_node(i,this.__wbg_ptr);var t=a().getInt32(i+4*0,!0),e=a().getInt32(i+4*1,!0),_=a().getInt32(i+4*2,!0);if(_)throw u(e);return t!==0}finally{r.__wbindgen_add_to_stack_pointer(16)}}}async function Gt(n,t){if(typeof Response=="function"&&n instanceof Response){if(typeof WebAssembly.instantiateStreaming=="function")try{return await WebAssembly.instantiateStreaming(n,t)}catch(_){if(n.headers.get("Content-Type")!="application/wasm")console.warn("`WebAssembly.instantiateStreaming` failed because your server does not serve Wasm with `application/wasm` MIME type. Falling back to `WebAssembly.instantiate` which is slower. Original error:\n",_);else throw _}const e=await n.arrayBuffer();return await WebAssembly.instantiate(e,t)}else{const e=await WebAssembly.instantiate(n,t);return e instanceof WebAssembly.Instance?{instance:e,module:n}:e}}function Vt(){const n={};return n.wbg={},n.wbg.__wbg_String_27455dd4b3bd5842=function(t,e){const _=String(y(e)),i=b(_,r.__wbindgen_malloc,r.__wbindgen_realloc),o=f;a().setInt32(t+4*1,o,!0),a().setInt32(t+4*0,i,!0)},n.wbg.__wbg_awaitPromise_07c93582b9c7a10c=function(t,e){Pt(t>>>0,y(e))},n.wbg.__wbg_buffer_609cc3eee51ed158=function(t){const e=y(t).buffer;return l(e)},n.wbg.__wbg_call_7cccdd69e0791ae2=function(){return zt(function(t,e,_){const i=y(t).call(y(e),y(_));return l(i)},arguments)},n.wbg.__wbg_comment_new=function(t){const e=K.__wrap(t);return l(e)},n.wbg.__wbg_comments_6f546f20d662793e=function(t){const e=y(t).comments;return m(e)?0:l(e)},n.wbg.__wbg_comments_cfaf0baaf6b192a4=function(t){const e=y(t).comments;return m(e)?0:l(e)},n.wbg.__wbg_doctype_ecb70dc0a9c76834=function(t){const e=y(t).doctype;return m(e)?0:l(e)},n.wbg.__wbg_doctype_new=function(t){const e=X.__wrap(t);return l(e)},n.wbg.__wbg_documentend_new=function(t){const e=Q.__wrap(t);return l(e)},n.wbg.__wbg_element_6c84e83907479bb0=function(t){const e=y(t).element;return m(e)?0:l(e)},n.wbg.__wbg_element_new=function(t){const e=Y.__wrap(t);return l(e)},n.wbg.__wbg_enableEsiTags_4882d40ecf4e8f58=function(t){const e=y(t).enableEsiTags;return m(e)?16777215:e?1:0},n.wbg.__wbg_end_ab1ca090609502e7=function(t){const e=y(t).end;return m(e)?0:l(e)},n.wbg.__wbg_endtag_new=function(t){const e=Z.__wrap(t);return l(e)},n.wbg.__wbg_html_ebae17f47e1d1022=function(t){const e=y(t).html;return m(e)?16777215:e?1:0},n.wbg.__wbg_instanceof_Promise_935168b8f4b49db3=function(t){let e;try{e=y(t)instanceof Promise}catch{e=!1}return e},n.wbg.__wbg_new_78feb108b6472713=function(){const t=new Array;return l(t)},n.wbg.__wbg_new_a12002a7f91c75be=function(t){const e=new Uint8Array(y(t));return l(e)},n.wbg.__wbg_new_b08a00743b8ae2f3=function(t,e){const _=new TypeError(N(t,e));return l(_)},n.wbg.__wbg_newwithbyteoffsetandlength_d97e637ebe145a9a=function(t,e,_){const i=new Uint8Array(y(t),e>>>0,_>>>0);return l(i)},n.wbg.__wbg_push_737cfc8c1432c2c6=function(t,e){return y(t).push(y(e))},n.wbg.__wbg_text_3ddd3e6f9f704c61=function(t){const e=y(t).text;return m(e)?0:l(e)},n.wbg.__wbg_text_6cf236cccc730f35=function(t){const e=y(t).text;return m(e)?0:l(e)},n.wbg.__wbg_textchunk_new=function(t){const e=tt.__wrap(t);return l(e)},n.wbg.__wbindgen_debug_string=function(t,e){const _=J(y(e)),i=b(_,r.__wbindgen_malloc,r.__wbindgen_realloc),o=f;a().setInt32(t+4*1,o,!0),a().setInt32(t+4*0,i,!0)},n.wbg.__wbindgen_memory=function(){const t=r.memory;return l(t)},n.wbg.__wbindgen_object_clone_ref=function(t){const e=y(t);return l(e)},n.wbg.__wbindgen_object_drop_ref=function(t){u(t)},n.wbg.__wbindgen_string_new=function(t,e){const _=N(t,e);return l(_)},n.wbg.__wbindgen_throw=function(t,e){throw new Error(N(t,e))},n}function Jt(n,t){return r=n.exports,It.__wbindgen_wasm_module=t,H=null,L=null,r}async function It(n){if(r!==void 0)return r;typeof n<"u"&&(Object.getPrototypeOf(n)===Object.prototype?{module_or_path:n}=n:console.warn("using deprecated parameters for the initialization function; pass a single object instead")),typeof n>"u"&&(n=new URL("/assets/html_rewriter_bg-BFXmePcJ.wasm",import.meta.url));const t=Vt();(typeof n=="string"||typeof Request=="function"&&n instanceof Request||typeof URL=="function"&&n instanceof URL)&&(n=fetch(n));const{instance:e,module:_}=await Gt(await n,t);return Jt(e,_)}new TextEncoder;new TextDecoder;let wt=class xt{constructor(t={}){this.elementHandlers=[],this.documentHandlers=[]}on(t,e){return this.elementHandlers.push([t,e]),this}onDocument(t){return this.documentHandlers.push(t),this}transform(t){const e=t.body;if(e===null)return new Response(e,t);t instanceof Response&&(t=new Response(t.body,t));let _;const i=new ReadableStream({start:async s=>{await xt.initPromise,_=new Bt(d=>{d.length!==0&&s.enqueue(d)},{enableEsiTags:!1});for(const[d,g]of this.elementHandlers)_.on(d,g);for(const d of this.documentHandlers)_.onDocument(d);const c=e.getReader();try{for(;;){const{done:d,value:g}=await c.read();if(d)break;_.write(g)}_.end()}catch(d){s.error(d)}finally{_.free(),c.releaseLock(),s.close()}}}),o=new Response(i,t);return o.headers.delete("Content-Length"),o}};function Kt(n){return wt.initPromise=n,wt}const Rt=Kt(It(fetch(new URL("/assets/html_rewriter_bg-BFXmePcJ.wasm",import.meta.url)))),pt=({fragmentId:n,content:t,classNames:e})=>({prefix:`<fragment-host class="${e}" fragment-id="${n}" data-piercing="true"><template shadowrootmode="open">${t}`,suffix:"</template></fragment-host>"});function Xt(n){return new Rt().on("script",{element(t){const e=t.getAttribute("type");e&&t.setAttribute("data-script-type",e),t.setAttribute("type","inert")}}).transform(new Response(n.body,n))}function Qt(n,t={}){const{additionalHeaders:e={},mode:_="development"}=t;return console.log("[Debug Info]: Web middleware"),async(c,d)=>{var I;const g=n.matchRequestToFragment(new URL(c.url).pathname);if(console.log("[Debug Info]: matched fragment:",g),!g){console.log("[Debug Info]: No fragment match, calling next()");try{return await d()}catch(p){return console.error("Error calling next():",p),o(p)}}if(c.headers.get("sec-fetch-dest")==="iframe")return console.log("[Debug Info]: Handling iframe request detected"),new Response("<!doctype html><title>",{headers:{"Content-Type":"text/html",vary:"sec-fetch-dest"}});const w=await i(c,g,e,_);if(c.headers.get("sec-fetch-dest")==="document"){const p=await d(),k=(I=p.headers.get("content-type"))==null?void 0:I.startsWith("text/html");if(p.ok&&k)try{if(!w.ok)return w;const E=Xt(w),R=await s({hostInput:p,fragmentResponse:E,fragmentConfig:g,gateway:n});return R.headers.append("vary","sec-fetch-dest"),await Yt(Promise.resolve(R),g)(R)}catch(E){return o(E)}return p}const x=new Response(w.body,w);return x.headers.set("vary","sec-fetch-dest"),x};async function i(c,d,g={},w="development"){const{endpoint:x}=d,I=new URL(c.url),p=new URL(`${I.pathname}${I.search}`,x),k=new AbortController,E=k.signal,R=setTimeout(()=>k.abort(),5e3),v=new Request(p,c);Object.entries(g).forEach(([T,M])=>{v.headers.set(T,M)}),v.headers.set("sec-fetch-dest","empty"),v.headers.set("x-fragment-mode","embedded"),w==="development"&&v.headers.set("Accept-Encoding","gzip");try{console.log("[Debug info | fetchFragment] fetching:",v.url.toString());const T=await fetch(v,{signal:E});return clearTimeout(R),T}catch(T){return o(T,v)}}function o(c,d){return console.log(`WF Gateway Internal Server Error
`,c,d),c instanceof Response?c:new Response(`WF Gateway Internal Server Error
`+c,{status:500,headers:{"Content-Type":"text/html"}})}async function s({hostInput:c,fragmentResponse:d,fragmentConfig:g,gateway:w}){const{fragmentId:x,prePiercingClassNames:I}=g;console.log("[[Debug Info]: Fragment Config]:",{fragmentId:x,prePiercingClassNames:I}),pt({fragmentId:x,classNames:I.join(" "),content:""});const p=await d.text();return new Rt().on("head",{element(k){console.log("[[Debug Info]: HTMLRewriter]: Injecting styles into head"),k.append(w.prePiercingStyles,{html:!0})}}).on("body",{element(k){const E=pt({fragmentId:x,classNames:I.join(" "),content:p});console.log("[[Debug Info]: Fragment Response]: Received HTML content",typeof p),k.append(E.prefix,{html:!0}),k.append(E.suffix,{html:!0})}}).transform(c)}}function Yt(n,t){return async e=>{const _=(await n).headers,{forwardFragmentHeaders:i=[]}=t;for(const o of i)e.headers.append(o,_.get(o)||"");return e}}const et=new Nt({prePiercingStyles:`<style id="fragment-piercing-styles" type="text/css">
	fragment-host[data-piercing="true"] {
	  position: absolute;
	  z-index: 9999999999999999999999999999999;
	}
  </style>`});et.registerFragment({fragmentId:"remix",prePiercingClassNames:["remix"],routePatterns:["/remix-page/:_*","/_fragment/remix/:_*"],endpoint:"http://localhost:3000",upstream:"http://localhost:3000",onSsrFetchError:()=>({response:new Response("<p>Remix fragment not found</p>",{headers:{"content-type":"text/html"}})})});et.registerFragment({fragmentId:"qwik",prePiercingClassNames:["qwik"],routePatterns:["/qwik-page/:_*","/_fragment/qwik/:_*"],endpoint:"http://localhost:8123",upstream:"http://localhost:8123",forwardFragmentHeaders:["x-fragment-name"],onSsrFetchError:()=>({response:new Response("<p>Qwik fragment not found</p>",{headers:{"content-type":"text/html"}})})});const Zt=Qt(et,{mode:"development"});self.addEventListener("fetch",n=>{n.respondWith(te(n.request))});async function te(n){return console.log("Intercepted request:",n.url),await Zt(n,()=>fetch(n))}self.addEventListener("install",n=>{n.waitUntil(self.skipWaiting())});self.addEventListener("activate",n=>{n.waitUntil(self.clients.claim())});
